<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R-squared (R2) • performance</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet">
<script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="R-squared (R2)">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">performance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.12.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html" aria-label="Reference"><span class="fa fa-file-code"></span> Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html" aria-label="Articles"><span class="fa fa-book-reader"></span> Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html" aria-label="News"><span class="fa fa-newspaper"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-easystats" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="easystats"><span class="fa fab fa-r-project"></span> easystats</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-easystats">
<li><a class="external-link dropdown-item" href="https://easystats.github.io/bayestestR/">bayestestR</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/correlation/">correlation</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/datawizard/">datawizard</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/easystats/">easystats</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/effectsize/">effectsize</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/insight/">insight</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/modelbased/">modelbased</a></li>
    <li><a class="dropdown-item" href="https://easystats.github.io/performance/">performance</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/parameters/">parameters</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/report/">report</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/see/">see</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/easystats4u" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/easystats/performance/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>R-squared (R2)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/easystats/performance/blob/main/vignettes/r2.Rmd" class="external-link"><code>vignettes/r2.Rmd</code></a></small>
      <div class="d-none name"><code>r2.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-the-r2">What is the R2?<a class="anchor" aria-label="anchor" href="#what-is-the-r2"></a>
</h2>
<p>The <strong>coefficient of determination</strong>, denoted <span class="math inline">R^2</span> and pronounced “R squared”, typically
corresponds the proportion of the variance in the dependent variable
(the response) that is <em>explained</em> (i.e., predicted) by the
independent variables (the predictors).</p>
<p>It is an “absolute” index of <em>goodness-of-fit</em>, ranging from 0
to 1 (often expressed in percentage), and can be used for model
performance assessment or models comparison.</p>
</div>
<div class="section level2">
<h2 id="different-types-of-r2">Different types of R2<a class="anchor" aria-label="anchor" href="#different-types-of-r2"></a>
</h2>
<p>As models become more complex, the computation of an <span class="math inline">R^2</span> becomes increasingly less
straightforward.</p>
<p>Currently, depending on the context of the regression model object,
one can choose from the following measures supported in
<a href="https://easystats.github.io/performance/">performance</a>:</p>
<ul>
<li>Bayesian <span class="math inline">R^2</span>
</li>
<li>Cox &amp; Snell’s <span class="math inline">R^2</span>
</li>
<li>Efron’s <span class="math inline">R^2</span>
</li>
<li>Kullback-Leibler <span class="math inline">R^2</span>
</li>
<li>LOO-adjusted <span class="math inline">R^2</span>
</li>
<li>McFadden’s <span class="math inline">R^2</span>
</li>
<li>McKelvey &amp; Zavoinas <span class="math inline">R^2</span>
</li>
<li>Nagelkerke’s <span class="math inline">R^2</span>
</li>
<li>Nakagawa’s <span class="math inline">R^2</span> for mixed
models</li>
<li>Somers’ <span class="math inline">D_{xy}</span> rank correlation for
binary outcomes</li>
<li>Tjur’s <span class="math inline">R^2</span> - coefficient of
determination (D)</li>
<li>Xu’ <span class="math inline">R^2</span> (Omega-squared)</li>
<li>
<span class="math inline">R^2</span> for models with
zero-inflation</li>
</ul>
<p><em>TO BE COMPLETED.</em></p>
<p>Before we begin, let’s first load the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/performance/">performance</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="r2-for-lm">R2 for <code>lm</code><a class="anchor" aria-label="anchor" href="#r2-for-lm"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>m_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(wt <span class="sc">~</span> am <span class="sc">*</span> cyl, <span class="at">data =</span> mtcars)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">r2</span>(m_lm)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># R2 for Linear Regression</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="er">&gt;</span>        R2<span class="sc">:</span> <span class="fl">0.724</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="sc">&gt;</span>   adj. R2<span class="sc">:</span> <span class="fl">0.694</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="r2-for-glm">R2 for <code>glm</code><a class="anchor" aria-label="anchor" href="#r2-for-glm"></a>
</h2>
<p>In the context of a generalized linear model (e.g., a logistic model
which outcome is binary), <span class="math inline">R^2</span> doesn’t
measure the percentage of <em>“explained variance”</em>, as this concept
doesn’t apply. However, the <span class="math inline">R^2</span>s that
have been adapted for GLMs have retained the name of “R2”, mostly
because of the similar properties (the range, the sensitivity, and the
interpretation as the amount of explanatory power).</p>
</div>
<div class="section level2">
<h2 id="r2-for-mixed-models">R2 for Mixed Models<a class="anchor" aria-label="anchor" href="#r2-for-mixed-models"></a>
</h2>
<div class="section level3">
<h3 id="marginal-vs--conditional-r2">Marginal vs. Conditional R2<a class="anchor" aria-label="anchor" href="#marginal-vs--conditional-r2"></a>
</h3>
<p>For mixed models, <code>performance</code> will return two different
<span class="math inline">R^2</span>s:</p>
<ul>
<li>The <strong>conditional</strong> <span class="math inline">R^2</span>
</li>
<li>The <strong>marginal</strong> <span class="math inline">R^2</span>
</li>
</ul>
<p>The marginal <span class="math inline">R^2</span> considers only the
variance of the <strong>fixed effects</strong> (without the random
effects), while the conditional <span class="math inline">R^2</span>
takes <em>both</em> the <strong>fixed and random effects</strong> into
account (i.e., the total model).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># defining a linear mixed-effects model</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Petal.Length <span class="sc">~</span> Petal.Width <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> Species), <span class="at">data =</span> iris)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">r2</span>(model)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># R2 for Mixed Models</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="er">&gt;</span> </span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="er">&gt;</span>   Conditional R2<span class="sc">:</span> <span class="fl">0.933</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="sc">&gt;</span>      Marginal R2<span class="sc">:</span> <span class="fl">0.303</span></span></code></pre></div>
<p>Note that <code>r2</code> functions only return the <span class="math inline">R^2</span> values. We would encourage users to
instead always use the <code>model_performance</code> function to get a
more comprehensive set of indices of model fit.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">model_performance</span>(model)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># Indices of model performance</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="er">&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="er">&gt;</span> AIC     <span class="sc">|</span>    AICc <span class="sc">|</span>     BIC <span class="sc">|</span> <span class="fu">R2</span> (cond.) <span class="sc">|</span> <span class="fu">R2</span> (marg.) <span class="sc">|</span>   ICC <span class="sc">|</span>  RMSE <span class="sc">|</span> Sigma</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="sc">&gt;</span> <span class="sc">-----------------------------------------------------------------------------</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="er">&gt;</span> <span class="fl">159.036</span> <span class="sc">|</span> <span class="fl">159.312</span> <span class="sc">|</span> <span class="fl">171.079</span> <span class="sc">|</span>      <span class="fl">0.933</span> <span class="sc">|</span>      <span class="fl">0.303</span> <span class="sc">|</span> <span class="fl">0.904</span> <span class="sc">|</span> <span class="fl">0.373</span> <span class="sc">|</span> <span class="fl">0.378</span></span></code></pre></div>
<p>But, in the current vignette, we would like to exclusively focus on
this family of functions and will only talk about this measure.</p>
</div>
</div>
<div class="section level2">
<h2 id="r2-for-bayesian-models">R2 for Bayesian Models<a class="anchor" aria-label="anchor" href="#r2-for-bayesian-models"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(rstanarm)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> cyl, <span class="at">data =</span> mtcars, <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">r2</span>(model)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># Bayesian R2 with Compatibility Interval</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="er">&gt;</span> </span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="er">&gt;</span>   Conditional R2<span class="sc">:</span> <span class="fl">0.816</span> (<span class="dv">95</span>% CI [<span class="fl">0.704</span>, <span class="fl">0.897</span>])</span></code></pre></div>
<p>As discussed above, for mixed-effects models, there will be two
components associated with <span class="math inline">R^2</span>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># defining a Bayesian mixed-effects model</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">stan_lmer</span>(Petal.Length <span class="sc">~</span> Petal.Width <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> Species), <span class="at">data =</span> iris, <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">r2</span>(model)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># Bayesian R2 with Compatibility Interval</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="er">&gt;</span> </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="er">&gt;</span>   Conditional R2<span class="sc">:</span> <span class="fl">0.954</span> (<span class="dv">95</span>% CI [<span class="fl">0.950</span>, <span class="fl">0.957</span>])</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="sc">&gt;</span>      Marginal R2<span class="sc">:</span> <span class="fl">0.405</span> (<span class="dv">95</span>% CI [<span class="fl">0.186</span>, <span class="fl">0.625</span>])</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="comparing-change-in-r2-using-cohens-f">Comparing change in R2 using Cohen’s <em>f</em><a class="anchor" aria-label="anchor" href="#comparing-change-in-r2-using-cohens-f"></a>
</h2>
<p>Cohen’s <span class="math inline">f</span> (of <a href="https://easystats.github.io/effectsize/articles/anovaES.html" class="external-link">ANOVA
fame</a>) can be used as a measure of effect size in the context of
sequential multiple regression (i.e., <a href="https://easystats.github.io/performance/reference/test_performance.html"><strong>nested
models</strong></a>). That is, when comparing two models, we can examine
the ratio between the increase in <span class="math inline">R^2</span>
and the unexplained variance:</p>
<p><span class="math display">
f^{2}={R_{AB}^{2}-R_{A}^{2} \over 1-R_{AB}^{2}}
</span></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">library</span>(effectsize)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">data</span>(hardlyworking)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> xtra_hours, <span class="at">data =</span> hardlyworking)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> xtra_hours <span class="sc">+</span> n_comps <span class="sc">+</span> seniority, <span class="at">data =</span> hardlyworking)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">cohens_f_squared</span>(m1, <span class="at">model2 =</span> m2)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="sc">&gt;</span> Cohen<span class="st">'s f2 (partial) |      95% CI | R2_delta</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="st">&gt; ---------------------------------------------</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="st">&gt; 1.19                 | [0.99, Inf] |     0.17</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="st">&gt; </span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="st">&gt; - One-sided CIs: upper bound fixed at [Inf].</span></span></code></pre></div>
<p>If you want to know more about these indices, you can check out
details and references in the functions that compute them <a href="https://easystats.github.io/performance/reference/index.html#section-r-functions"><strong>here</strong></a>.</p>
</div>
<div class="section level2">
<h2 id="interpretation">Interpretation<a class="anchor" aria-label="anchor" href="#interpretation"></a>
</h2>
<p>If you want to know about how to <em>interpret</em> these <span class="math inline">R^2</span> values, see these <a href="https://easystats.github.io/effectsize/reference/interpret_r2.html" class="external-link"><strong>interpretation
guidelines</strong></a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://home.msbstats.info/" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, Philip Waggoner, <a href="https://wiernik.org/" class="external-link">Brenton M. Wiernik</a>, <a href="https://remi-theriault.com/" class="external-link">Rémi Thériault</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
