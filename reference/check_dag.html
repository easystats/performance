<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check correct model adjustment for identifying causal effects — check_dag • performance</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet"><script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check correct model adjustment for identifying causal effects — check_dag"><meta name="description" content='The purpose of check_dag() is to build, check and visualize
your model based on directed acyclic graphs (DAG). The function checks if a
model is correctly adjusted for identifying specific relationships of
variables, especially directed (maybe also "causal") effects for given
exposures on an outcome. In case of incorrect adjustments, the function
suggests the minimal required variables that should be adjusted for (sometimes
also called "controlled for"), i.e. variables that at least need to be
included in the model. Depending on the goal of the analysis, it is still
possible to add more variables to the model than just the minimally required
adjustment sets.
check_dag() is a convenient wrapper around ggdag::dagify(),
dagitty::adjustmentSets() and dagitty::adjustedNodes() to check correct
adjustment sets. It returns a dagitty object that can be visualized with
plot(). as.dag() is a small convenient function to return the
dagitty-string, which can be used for the online-tool from the
dagitty-website.'><meta property="og:description" content='The purpose of check_dag() is to build, check and visualize
your model based on directed acyclic graphs (DAG). The function checks if a
model is correctly adjusted for identifying specific relationships of
variables, especially directed (maybe also "causal") effects for given
exposures on an outcome. In case of incorrect adjustments, the function
suggests the minimal required variables that should be adjusted for (sometimes
also called "controlled for"), i.e. variables that at least need to be
included in the model. Depending on the goal of the analysis, it is still
possible to add more variables to the model than just the minimally required
adjustment sets.
check_dag() is a convenient wrapper around ggdag::dagify(),
dagitty::adjustmentSets() and dagitty::adjustedNodes() to check correct
adjustment sets. It returns a dagitty object that can be visualized with
plot(). as.dag() is a small convenient function to return the
dagitty-string, which can be used for the online-tool from the
dagitty-website.'><meta property="og:image" content="https://easystats.github.io/performance/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@easystats4u"><meta name="twitter:site" content="@easystats4u"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">performance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.12.4.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html" aria-label="Reference"><span class="fa fa-file-code"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html" aria-label="Articles"><span class="fa fa-book-reader"></span> Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html" aria-label="News"><span class="fa fa-newspaper"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-easystats" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="easystats"><span class="fa fab fa-r-project"></span> easystats</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-easystats"><li><a class="external-link dropdown-item" href="https://easystats.github.io/bayestestR/">bayestestR</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/correlation/">correlation</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/datawizard/">datawizard</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/easystats/">easystats</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/effectsize/">effectsize</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/insight/">insight</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/modelbased/">modelbased</a></li>
    <li><a class="dropdown-item" href="https://easystats.github.io/performance/">performance</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/parameters/">parameters</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/report/">report</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/see/">see</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/easystats4u" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/easystats/performance/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Check correct model adjustment for identifying causal effects</h1>
      <small class="dont-index">Source: <a href="https://github.com/easystats/performance/blob/main/R/check_dag.R" class="external-link"><code>R/check_dag.R</code></a></small>
      <div class="d-none name"><code>check_dag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The purpose of <code>check_dag()</code> is to build, check and visualize
your model based on directed acyclic graphs (DAG). The function checks if a
model is correctly adjusted for identifying specific relationships of
variables, especially directed (maybe also "causal") effects for given
exposures on an outcome. In case of incorrect adjustments, the function
suggests the minimal required variables that should be adjusted for (sometimes
also called "controlled for"), i.e. variables that <em>at least</em> need to be
included in the model. Depending on the goal of the analysis, it is still
possible to add more variables to the model than just the minimally required
adjustment sets.</p>
<p><code>check_dag()</code> is a convenient wrapper around <code><a href="https://r-causal.github.io/ggdag/reference/dagify.html" class="external-link">ggdag::dagify()</a></code>,
<code><a href="https://rdrr.io/pkg/dagitty/man/adjustmentSets.html" class="external-link">dagitty::adjustmentSets()</a></code> and <code><a href="https://rdrr.io/pkg/dagitty/man/VariableStatus.html" class="external-link">dagitty::adjustedNodes()</a></code> to check correct
adjustment sets. It returns a <strong>dagitty</strong> object that can be visualized with
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>. <code>as.dag()</code> is a small convenient function to return the
dagitty-string, which can be used for the online-tool from the
dagitty-website.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_dag</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  outcome <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exposure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adjusted <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  latent <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"total"</span>, <span class="st">"direct"</span><span class="op">)</span>,</span>
<span>  coords <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as.dag</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more formulas, which are converted into <strong>dagitty</strong> syntax.
First element may also be model object. If a model objects is provided, its
formula is used as first formula, and all independent variables will be used
for the <code>adjusted</code> argument. See 'Details' and 'Examples'.</p></dd>


<dt id="arg-outcome">outcome<a class="anchor" aria-label="anchor" href="#arg-outcome"></a></dt>
<dd><p>Name of the dependent variable (outcome), as character string
or as formula. Must be a valid name from the formulas provided in <code>...</code>. If
not set, the first dependent variable from the formulas is used.</p></dd>


<dt id="arg-exposure">exposure<a class="anchor" aria-label="anchor" href="#arg-exposure"></a></dt>
<dd><p>Name of the exposure variable (as character string or
formula), for which the direct and total causal effect on the <code>outcome</code>
should be checked. Must be a valid name from the formulas provided in <code>...</code>.
If not set, the first independent variable from the formulas is used.</p></dd>


<dt id="arg-adjusted">adjusted<a class="anchor" aria-label="anchor" href="#arg-adjusted"></a></dt>
<dd><p>A character vector or formula with names of variables that
are adjusted for in the model, e.g. <code>adjusted = c("x1", "x2")</code> or
<code>adjusted = ~ x1 + x2</code>. If a model object is provided in <code>...</code>, any values in
<code>adjusted</code> will be overwritten by the model's independent variables.</p></dd>


<dt id="arg-latent">latent<a class="anchor" aria-label="anchor" href="#arg-latent"></a></dt>
<dd><p>A character vector with names of latent variables in the model.</p></dd>


<dt id="arg-effect">effect<a class="anchor" aria-label="anchor" href="#arg-effect"></a></dt>
<dd><p>Character string, indicating which effect to check. Can be
<code>"all"</code> (default), <code>"total"</code>, or <code>"direct"</code>.</p></dd>


<dt id="arg-coords">coords<a class="anchor" aria-label="anchor" href="#arg-coords"></a></dt>
<dd><p>Coordinates of the variables when plotting the DAG. The
coordinates can be provided in three different ways:</p><ul><li><p>a list with two elements, <code>x</code> and <code>y</code>, which both are named vectors of
numerics. The names correspond to the variable names in the DAG, and the
values for <code>x</code> and <code>y</code> indicate the x/y coordinates in the plot.</p></li>
<li><p>a list with elements that correspond to the variables in the DAG. Each
element is a numeric vector of length two with x- and y-coordinate.</p></li>
<li><p>a data frame with three columns: <code>x</code>, <code>y</code> and <code>name</code> (which contains the
variable names).</p></li>
</ul><p>See 'Examples'.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code>check_dag</code>, as returned by <code>check_dag()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>check_dag</code>, which can be visualized with <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.
The returned object also inherits from class <code>dagitty</code> and thus can be used
with all functions from the <strong>ggdag</strong> and <strong>dagitty</strong> packages.</p>
    </div>
    <div class="section level2">
    <h2 id="specifying-the-dag-formulas">Specifying the DAG formulas<a class="anchor" aria-label="anchor" href="#specifying-the-dag-formulas"></a></h2>



<p>The formulas have following syntax:</p><ul><li><p>One-directed paths: On the <em>left-hand-side</em> is the name of the variables
where causal effects point to (direction of the arrows, in dagitty-language).
On the <em>right-hand-side</em> are all variables where causal effects are assumed
to come from. For example, the formula <code>Y ~ X1 + X2</code>, paths directed from
both <code>X1</code> and <code>X2</code> to <code>Y</code> are assumed.</p></li>
<li><p>Bi-directed paths: Use <code>~~</code> to indicate bi-directed paths. For example,
<code>Y ~~ X</code> indicates that the path between <code>Y</code> and <code>X</code> is bi-directed, and
the arrow points in both directions. Bi-directed paths often indicate
unmeasured cause, or unmeasured confounding, of the two involved variables.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="minimally-required-adjustments">Minimally required adjustments<a class="anchor" aria-label="anchor" href="#minimally-required-adjustments"></a></h2>



<p>The function checks if the model is correctly adjusted for identifying the
direct and total effects of the exposure on the outcome. If the model is
correctly specified, no adjustment is needed to estimate the direct effect.
If the model is not correctly specified, the function suggests the minimally
required variables that should be adjusted for. The function distinguishes
between direct and total effects, and checks if the model is correctly
adjusted for both. If the model is cyclic, the function stops and suggests
to remove cycles from the model.</p>
<p>Note that it sometimes could be necessary to try out different combinations
of suggested adjustments, because <code>check_dag()</code> can not always detect whether
<em>at least</em> one of several variables is required, or whether adjustments should
be done for <em>all</em> listed variables. It can be useful to copy the dagitty-code
(using <code>as.dag()</code>, which prints the dagitty-string into the console) into
the dagitty-website and play around with different adjustments.</p>
    </div>
    <div class="section level2">
    <h2 id="direct-and-total-effects">Direct and total effects<a class="anchor" aria-label="anchor" href="#direct-and-total-effects"></a></h2>



<p>The direct effect of an exposure on an outcome is the effect that is not
mediated by any other variable in the model. The total effect is the sum of
the direct and indirect effects. The function checks if the model is correctly
adjusted for identifying the direct and total effects of the exposure on the
outcome.</p>
    </div>
    <div class="section level2">
    <h2 id="why-are-dags-important-the-table-fallacy">Why are DAGs important - the Table 2 fallacy<a class="anchor" aria-label="anchor" href="#why-are-dags-important-the-table-fallacy"></a></h2>



<p>Correctly thinking about and identifying the relationships between variables
is important when it comes to reporting coefficients from regression models
that mutually adjust for "confounders" or include covariates. Different
coefficients might have different interpretations, depending on their
relationship to other variables in the model. Sometimes, a regression
coefficient represents the direct effect of an exposure on an outcome, but
sometimes it must be interpreted as total effect, due to the involvement
of mediating effects. This problem is also called "Table 2 fallacy"
(<em>Westreich and Greenland 2013</em>). DAG helps visualizing and thereby focusing
the relationships of variables in a regression model to detect missing
adjustments or over-adjustment.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Rohrer, J. M. (2018). Thinking clearly about correlations and causation:
Graphical causal models for observational data. Advances in Methods and
Practices in Psychological Science, 1(1), 27–42. <a href="https://doi.org/10.1177/2515245917745629" class="external-link">doi:10.1177/2515245917745629</a></p></li>
<li><p>Westreich, D., &amp; Greenland, S. (2013). The Table 2 Fallacy: Presenting and
Interpreting Confounder and Modifier Coefficients. American Journal of
Epidemiology, 177(4), 292–298. <a href="https://doi.org/10.1093/aje/kws412" class="external-link">doi:10.1093/aje/kws412</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># no adjustment needed</span></span></span>
<span class="r-in"><span><span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"x"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;"># Check for correct adjustment sets</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Outcome: y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Exposure: x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Identification of direct and total effects</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Model is correctly specified.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No adjustment needed to estimate the direct and total effect of `x` on `y`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># incorrect adjustment</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">~</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"x"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dag</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;"># Check for correct adjustment sets</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Outcome: y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Exposure: x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Identification of direct and total effects</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Incorrectly adjusted!</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> To estimate the direct and total effect, <span style="font-style: italic;">at least</span> adjust for <span style="color: #BBBB00;">`b`</span>. Currently, the model does not adjust for any variables.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="check_dag-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># After adjusting for `b`, the model is correctly specified</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">~</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"x"</span>,</span></span>
<span class="r-in"><span>  adjusted <span class="op">=</span> <span class="st">"b"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dag</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;"># Check for correct adjustment sets</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Outcome: y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Exposure: x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Adjustment: b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Identification of direct and total effects</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Model is correctly specified.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All minimal sufficient adjustments to estimate the direct and total effect were done.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using formula interface for arguments "outcome", "exposure" and "adjusted"</span></span></span>
<span class="r-in"><span><span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">~</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="op">~</span><span class="va">y</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="op">~</span><span class="va">x</span>,</span></span>
<span class="r-in"><span>  adjusted <span class="op">=</span> <span class="op">~</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;"># Check for correct adjustment sets</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Outcome: y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Exposure: x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Adjustments: b and c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Identification of direct and total effects</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Model is correctly specified.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All minimal sufficient adjustments to estimate the direct and total effect were done.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if not provided, "outcome" is taken from first formula, same for "exposure"</span></span></span>
<span class="r-in"><span><span class="co"># thus, we can simplify the above expression to</span></span></span>
<span class="r-in"><span><span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">~</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  adjusted <span class="op">=</span> <span class="op">~</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;"># Check for correct adjustment sets</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Outcome: y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Exposure: x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Adjustments: b and c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Identification of direct and total effects</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Model is correctly specified.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All minimal sufficient adjustments to estimate the direct and total effect were done.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use specific layout for the DAG</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">score</span> <span class="op">~</span> <span class="va">exp</span> <span class="op">+</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span>,</span></span>
<span class="r-in"><span>  <span class="va">exp</span> <span class="op">~</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"score"</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"exp"</span>,</span></span>
<span class="r-in"><span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="co"># x-coordinates for all nodes</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>score <span class="op">=</span> <span class="fl">5</span>, exp <span class="op">=</span> <span class="fl">4</span>, b <span class="op">=</span> <span class="fl">3</span>, c <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="co"># y-coordinates for all nodes</span></span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>score <span class="op">=</span> <span class="fl">3</span>, exp <span class="op">=</span> <span class="fl">3</span>, b <span class="op">=</span> <span class="fl">2</span>, c <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="check_dag-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># alternative way of providing the coordinates</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">score</span> <span class="op">~</span> <span class="va">exp</span> <span class="op">+</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span>,</span></span>
<span class="r-in"><span>  <span class="va">exp</span> <span class="op">~</span> <span class="va">b</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"score"</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"exp"</span>,</span></span>
<span class="r-in"><span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="co"># x/y coordinates for each node</span></span></span>
<span class="r-in"><span>    score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="check_dag-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Objects returned by `check_dag()` can be used with "ggdag" or "dagitty"</span></span></span>
<span class="r-in"><span><span class="fu">ggdag</span><span class="fu">::</span><span class="fu"><a href="https://r-causal.github.io/ggdag/reference/status.html" class="external-link">ggdag_status</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="check_dag-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using a model object to extract information about outcome,</span></span></span>
<span class="r-in"><span><span class="co"># exposure and adjusted variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">gear</span> <span class="op">+</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu">check_dag</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">m</span>,</span></span>
<span class="r-in"><span>  <span class="va">wt</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">cyl</span>,</span></span>
<span class="r-in"><span>  <span class="va">wt</span> <span class="op">~</span> <span class="va">am</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dag</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;"># Check for correct adjustment sets</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Outcome: mpg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Exposure: wt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Adjustments: cyl, disp and gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Identification of direct and total effects</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Model is correctly specified.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All minimal sufficient adjustments to estimate the direct and total effect were done.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="check_dag-5.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://home.msbstats.info/" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, Philip Waggoner, <a href="https://wiernik.org/" class="external-link">Brenton M. Wiernik</a>, <a href="https://remi-theriault.com/" class="external-link">Rémi Thériault</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

